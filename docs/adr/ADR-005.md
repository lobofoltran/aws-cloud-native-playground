# ADR-005: Use a Single VPC for ECS and EKS Workloads

## Status
Accepted

## Context

The AWS Cloud-Native Playground runs workloads across multiple managed compute platforms, primarily **ECS Fargate** and **EKS**.

A networking decision is required to determine how these platforms are connected. Two main approaches were considered:

1. **Single VPC**
   - ECS and EKS workloads share the same VPC
2. **Multiple VPCs**
   - Separate VPCs per compute platform, connected via peering or Transit Gateway

The project prioritizes **simplicity, clarity, and learning efficiency** over large-scale enterprise isolation patterns.

---

## Decision

The platform will use a **single VPC** to host all ECS and EKS workloads.

Both platforms will operate in **private subnets**, sharing common networking components such as:
- Application Load Balancer (ALB)
- Route tables
- VPC endpoints

---

## Rationale

Using a single VPC provides:

- Simpler network topology
- Easier service-to-service communication
- Reduced configuration overhead
- Faster iteration and debugging
- Clear visibility of traffic flows

For a learning-focused, cloud-native platform, a single VPC offers the best balance between realism and operational simplicity.

---

## Consequences

### Positive
- Reduced network complexity
- No need for VPC peering or Transit Gateway
- Lower cost
- Easier troubleshooting
- Straightforward ECS ↔ EKS communication

### Negative
- Reduced blast-radius isolation
- Less strict network separation between platforms
- Not representative of large, multi-account enterprise setups

These downsides are acceptable given the project’s **non-production, exploratory nature**.

---

## Alternatives Considered

### Multiple VPCs

**Pros**
- Strong isolation
- Clear security boundaries
- Scales well in large enterprises

**Cons**
- Higher operational complexity
- Additional cost (peering, TGW)
- Harder to reason about traffic flows
- Overkill for learning and experimentation

This approach was intentionally rejected to avoid unnecessary architectural weight.

---

## Scope

This decision applies to:
- Network topology
- Service placement
- Load balancing
- Internal service communication

It does not prevent future experimentation with multi-VPC or multi-account architectures as separate exercises.

---

## Notes

This ADR reflects a **progressive platform mindset**:
- Start simple
- Keep architecture explicit
- Add complexity only when justified

A single VPC is sufficient to explore cloud-native patterns without obscuring core concepts.
