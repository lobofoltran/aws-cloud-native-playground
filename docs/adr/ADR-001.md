# ADR-001: Use Amazon SQS as the Core Messaging System

## Status
Accepted

## Context

The AWS Cloud-Native Playground requires an asynchronous messaging mechanism to enable **loose coupling** between services deployed across different compute models (ECS and EKS).

The system must:
- Avoid direct service-to-service dependencies
- Support failure isolation
- Minimize operational complexity
- Align with a managed, cloud-native approach

Several messaging options were considered, including synchronous HTTP, Amazon SQS, Amazon SNS/EventBridge, and Apache Kafka.

---

## Decision

**Amazon SQS is chosen as the primary messaging mechanism** for asynchronous communication between services.

SNS and EventBridge may be used for event fan-out and routing, while Kafka is introduced only as an optional, comparative technology.

---

## Rationale

Amazon SQS provides:
- Fully managed operation
- High availability by default
- Built-in retry mechanisms
- Native Dead Letter Queue (DLQ) support
- Predictable cost model
- Seamless integration with ECS and EKS

SQS aligns with the project’s principle of **avoiding infrastructure ownership** and focusing on platform-level concerns.

---

## Consequences

### Positive
- Reduced operational overhead
- Simplified failure handling
- Clear separation between producers and consumers
- Natural backpressure handling
- Suitable for ECS ↔ EKS communication

### Negative
- At-least-once delivery semantics
- No native message replay
- Limited ordering guarantees

These limitations are addressed through **idempotent consumers**, clear event contracts, and DLQ-based failure analysis.

---

## Alternatives Considered

### Synchronous HTTP
- Tight coupling
- Cascading failure risk
- Reduced resilience

### Apache Kafka
- Strong ordering and replay
- High operational and cost overhead
- Requires deep operational expertise

Kafka is intentionally excluded as a core dependency and reserved for comparative learning only.

---

## Scope

This decision applies to:
- Inter-service asynchronous communication
- Background task processing
- Event-driven workflows

It does not prohibit the use of other messaging technologies for experimentation or comparison.

---

## Notes

This ADR reflects a **learning-oriented, cloud-native design choice**, prioritizing managed services, operational clarity, and explicit trade-off documentation.
